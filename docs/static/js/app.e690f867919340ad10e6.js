webpackJsonp([1],{"6T48":function(e,t){},E23k:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),a=n("lbHh"),s=n("mtWM"),r={name:"login",data:function(){return{base:"https://winds-prod.getstream.io/",email:"",pass:""}},methods:{login:function(){var e=this;s({url:e.base+"auth/login",method:"post",responseType:"json",data:{email:e.email,password:e.pass}}).then(function(t){e.email="",e.pass="",a.set("jwt",t.data.jwt,{expires:99999}),a.set("id",t.data._id,{expires:99999}),e.$eventHub.$emit("auth")})}}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[e._m(0),e._v(" "),n("fieldset",[n("label",{staticClass:"c-label",attrs:{for:"email"}},[e._v("EMAIL")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"c-input",attrs:{type:"email",name:"email",id:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),e._v(" "),n("label",{staticClass:"c-label",attrs:{for:"pass"}},[e._v("PASSWORD")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.pass,expression:"pass"}],staticClass:"c-input",attrs:{type:"password",name:"pass",id:"pass"},domProps:{value:e.pass},on:{input:function(t){t.target.composing||(e.pass=t.target.value)}}}),e._v(" "),n("button",{staticClass:"c-button c-button--fw",attrs:{id:"login_button"},on:{click:e.login}},[e._v("LOGIN")])]),e._v(" "),e._m(1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("header",[t("h1",{staticClass:"main_title"},[this._v("winds.ink")]),this._v(" "),t("h4",{staticClass:"main_subtitle"},[this._v("Create an account at\n      "),t("a",{attrs:{href:"https://winds.getstream.io/"}},[this._v("winds.getstream.io")]),t("br"),this._v("and login with the same credentials here.\n    ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("footer",[t("a",{attrs:{href:"https://tomasmcm.design"}},[this._v("tomasmcm")]),this._v(" Â© 2018\n  ")])}]};var c=n("VU/8")(r,o,!1,function(e){n("E23k")},"data-v-abfb4842",null).exports,l=n("lbHh"),d={name:"header-menu",props:["feeds","currentFeed"],methods:{logout:function(){l.remove("jwt"),l.remove("id"),this.$eventHub.$emit("auth")}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"feeds"},[n("div",{staticClass:"backdrop",on:{click:function(t){e.$eventHub.$emit("hide-menu")}}}),e._v(" "),n("p",{staticClass:"u-text-r"},[n("button",{staticClass:"c-button u-inline",attrs:{id:"logout_button"},on:{click:e.logout}},[e._v("LOGOUT")])]),e._v(" "),n("br"),e._v(" "),n("small",[e._v("FEEDS")]),e._v(" "),e._l(e.feeds,function(t){return n("div",{key:"loadFeed"+t.index,staticClass:"feed",class:{"is-active":t.index==e.currentFeed},on:{click:function(n){e.$eventHub.$emit("load-feed",t.index)}}},[e._v("\n    "+e._s(t.name)+"\n  ")])})],2)},staticRenderFns:[]};var h=n("VU/8")(d,u,!1,function(e){n("wcIf")},"data-v-722c607d",null).exports,f={name:"feed-item",props:["article"],methods:{timeSince:function(e){var t=Math.floor((new Date).getTime()/1e3-e),n=Math.floor(t/2592e3);return n>=1?n+" month"+(1==n?"":"s"):(n=Math.floor(t/86400))>=1?n+" day"+(1==n?"":"s"):(n=Math.floor(t/3600))>=1?n+" hour"+(1==n?"":"s"):(n=Math.floor(t/60))+" minute"+(1==n?"":"s")}}},_={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"feed-item",on:{click:function(t){e.$eventHub.$emit("get-article",e.article.id)}}},[n("div",{staticClass:"feed-item__title"},[e._v("\n    "+e._s(e.article.title)+"\n  ")]),e._v(" "),n("div",{staticClass:"feed-item__date"},[e._v("\n    "+e._s(e.timeSince(e.article.date))+" ago\n  ")])])},staticRenderFns:[]};var v=n("VU/8")(f,_,!1,function(e){n("cIM6")},"data-v-799b4ef6",null).exports,m=n("mtWM"),p={name:"container",props:["jwt"],data:function(){return{base:"https://winds-prod.getstream.io/",feeds:[],articles:[],currentFeed:parseInt(window.location.hash.substr(1))||0,showMenu:!1,article:null,isLoading:!1}},created:function(){this.$eventHub.$on("load-feed",this.loadFeed),this.$eventHub.$on("hide-menu",this.hideMenu),this.$eventHub.$on("get-article",this.getArticle)},beforeDestroy:function(){this.$eventHub.$off("load-feed"),this.$eventHub.$off("hide-menu"),this.$eventHub.$off("get-article")},mounted:function(){this.getFeeds()},methods:{getFeeds:function(){var e=this;m({url:e.base+"follows?type=rss",method:"get",responseType:"json",headers:{authorization:"Bearer "+e.jwt}}).then(function(t){for(var n=0;n<t.data.length;n++)e.feeds.push({name:t.data[n].rss.description,index:n,id:t.data[n].rss._id})}).then(function(){e.getArticles()})},getArticles:function(){var e=this;m({url:e.base+"articles?page=1&per_page=10&rss="+e.feeds[e.currentFeed].id+"&sort_by=publicationDate,desc",method:"get",responseType:"json",headers:{authorization:"Bearer "+e.jwt}}).then(function(t){e.articles=[];for(var n=0;n<t.data.length;n++)e.articles.push({title:t.data[n].title,date:Math.round(new Date(t.data[n].publicationDate).getTime()/1e3),id:t.data[n]._id});window.location.hash=e.currentFeed})},getArticle:function(e){if(!this.isLoading){var t=this;t.isLoading=!0,m({url:t.base+"articles/"+e+"?type=parsed",method:"get",responseType:"json",headers:{authorization:"Bearer "+t.jwt}}).then(function(e){t.isLoading=!1,t.article={title:e.data.title,url:e.data.url,image:e.data.image,content:e.data.content,date:e.data.publicationDate}})}},previousFeed:function(){this.currentFeed=this.currentFeed-1,this.currentFeed<0&&(this.currentFeed=this.feeds.length-1),this.getArticles()},nextFeed:function(){this.currentFeed=(this.currentFeed+1)%this.feeds.length,this.getArticles()},loadFeed:function(e){this.hideMenu(),this.currentFeed=e,this.getArticles()},hideMenu:function(){this.showMenu=!1},closeArticle:function(e){e.stopPropagation(),this.article=null},scrollUp:function(e){e.preventDefault(),e.stopPropagation(),this.$refs.articleContent.scrollTop-=.8*window.innerHeight},scrollDown:function(e){e.preventDefault(),e.stopPropagation(),this.$refs.articleContent.scrollTop+=.8*window.innerHeight},doNothing:function(e){e.stopPropagation()}},components:{HeaderMenu:h,FeedItem:v}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"feeds"}},[e.showMenu?n("HeaderMenu",{attrs:{feeds:e.feeds,currentFeed:e.currentFeed}}):e._e(),e._v(" "),n("div",{staticClass:"feed-articles"},[n("div",{staticClass:"feed-title",on:{click:function(t){e.showMenu=!e.showMenu}}},[e._v("\n      "+e._s(e.feeds[e.currentFeed]?e.feeds[e.currentFeed].name:"")+"\n    ")]),e._v(" "),e._l(e.articles,function(e){return n("FeedItem",{key:e.id,attrs:{article:e}})})],2),e._v(" "),e.article?n("div",{staticClass:"article-container"},[n("div",{ref:"articleContent",staticClass:"article-content",on:{click:e.doNothing}},[n("p",{staticClass:"article-content__date"},[e._v("\n        "+e._s(new Date(e.article.date).toLocaleDateString("en-GB",{day:"numeric",month:"numeric",year:"numeric"})+" "+new Date(e.article.date).toLocaleTimeString("en-GB",{hour12:"numeric",minute:"numeric"}))+"\n      ")]),e._v(" "),n("h1",{staticClass:"article-content__title"},[e._v("\n        "+e._s(e.article.title)+"\n      ")]),e._v(" "),n("div",{staticClass:"article-content__toolbar"},[n("p",{staticClass:"article-content__author"},[e._v("\n          "+e._s(e.feeds[e.currentFeed]?e.feeds[e.currentFeed].name:"")+"\n        ")]),e._v(" "),n("a",{staticClass:"article-content__source",attrs:{href:e.article.url}},[e._v("View Source")])]),e._v(" "),n("br"),e._v(" "),n("img",{attrs:{src:e.article.image,alt:""}}),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"article-content__html",domProps:{innerHTML:e._s(e.article.content)}})]),e._v(" "),n("div",{staticClass:"feed-bar"},[n("div",{staticClass:"feed-bar__item feed-bar__up",on:{click:e.scrollUp}}),e._v(" "),n("div",{staticClass:"feed-bar__item feed-bar__down",on:{click:e.scrollDown}}),e._v(" "),n("div",{staticClass:"feed-bar__item feed-bar__close",on:{click:e.closeArticle}})])]):e._e(),e._v(" "),n("div",{staticClass:"feed-bar"},[n("div",{staticClass:"feed-bar__item feed-bar__up",on:{click:e.previousFeed}}),e._v(" "),n("div",{staticClass:"feed-bar__item feed-bar__down",on:{click:e.nextFeed}})])],1)},staticRenderFns:[]};var b=n("VU/8")(p,g,!1,function(e){n("6T48")},null,null).exports,w=n("lbHh"),C={name:"app",data:function(){return{auth:!(null==w.get("jwt")),jwt:w.get("jwt")}},created:function(){this.$eventHub.$on("auth",this.checkAuth)},beforeDestroy:function(){this.$eventHub.$off("auth")},methods:{checkAuth:function(){this.jwt=w.get("jwt"),this.auth=!(null==this.jwt)}},components:{Login:c,Container:b}},$={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[this.auth?this._e():t("Login"),this._v(" "),this.auth?t("Container",{attrs:{jwt:this.jwt}}):this._e()],1)},staticRenderFns:[]},F=n("VU/8")(C,$,!1,null,null,null).exports;i.a.prototype.$eventHub=new i.a,new i.a({el:"#app",render:function(e){return e(F)}})},cIM6:function(e,t){},wcIf:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.e690f867919340ad10e6.js.map